---
layout: default
title: sticky nav advanced
img_Path: https://picsum.photos/id/1025/600/400
---


<!-- <section></section> -->
<header class="center stickyHeader">
  <nav class="stickyNav">links</nav>
</header>

<section></section>
<section></section>
<section></section>



<style>
  section, header{min-height: 100vh; border: 1px solid;}

  header{
    display: flex;
    justify-content: center;
    align-items:  flex-start;
  }
  nav{
    border: 1px solid;
    background-color: #fff;
    padding: 5px;
  }
  
  .stickyNav{
    position: sticky;
    top: 0px;
    transition: .2s;
  }

  .stickyNav.fixed{ position: fixed;}
  .stickyNav.hide{ top: -30px;  transition: 1s;}
</style>

<script>
  const header = document.querySelector(".stickyHeader");
  const stickyNav = document.querySelector('.stickyNav');
  const staticNav = document.querySelector('.staticNav');
  let scrollHeight

  function updateNav() {
    let staticNavToTop = header.getBoundingClientRect().top;

    console.log(staticNavToTop)
    if (staticNavToTop < -100) {
      stickyNav.classList.add('fixed')
    } else {
      stickyNav.classList.remove('fixed')
    }
    
    if (window.scrollY < scrollHeight){
      if (staticNavToTop < -30) {
        stickyNav.classList.add("hide");
      } else {
        stickyNav.classList.remove("hide");
      }
    } else {
      stickyNav.classList.remove("hide");
    }

    scrollHeight = window.scrollY

    console.log(window.scrollY)

  }


  function debounce(func, wait = 2, immediate = true) {
      var timeout;
      return function () {
        var context = this, args = arguments;
        var later = function () {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
    };



   window.addEventListener('scroll', debounce(updateNav));
</script>